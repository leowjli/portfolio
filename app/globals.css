@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: #ffffff;
    --foreground: #000000;
    --primary: #000000;
    --secondary: #6b7280;
    --accent: #398eeb;
    --muted: #f3f4f6;
    --border: #e5e7eb;
    --card: #ffffff;
    --surface: #ffffff;
    --subtle: #91949a;
    --chip: #f3f4f6;
  }

  .dark {
    --background: #0a0a0a;
    --foreground: #ffffff;
    --primary: #ffffff;
    --secondary: #9ca3af;
    --accent: #5b9cff;
    /* --accent2: #02366e; */
    --muted: #1f2937;
    --border: #374151;
    --card: #111111;
    --surface: #111111;
    --subtle: #6b7280;
    --chip: #1f2937;
  }

  :root {
    --vermilion: #E34234;
    --warm-accent: #FFF5F3;
    --warm-border: #FFE4E1;
  }

  .dark {
    --warm-accent: #2a1614;
    --warm-border: #3d2420;
  }
}

@layer utilities {
  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .text-gradient {
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    background-image: linear-gradient(to right, #F03E41 5%, #951DC6 10%, #398EEB 30%);
  }

  @keyframes scroll {
    from {
      transform: translateX(0);
    }

    to {
      transform: translateX(-50%);
    }
  }

  .animate-scroll {
    animation: scroll 50s linear infinite;
  }

  /* Button hover effect with gradient fill */
  .btn-gradient-hover {
    position: relative;
    background-color: transparent;
    border: 2px solid transparent;
    transition: color 0.3s cubic-bezier(0.694, 0, 0.335, 1);
  }

  /* Border using gradient */
  .btn-gradient-hover::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    border-radius: inherit;
    padding: 2px;
    background: linear-gradient(to right, #F03E41 5%, #951DC6 35%, #398EEB 80%);
    -webkit-mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    mask-composite: exclude;
  }

  /* Fill on hover */
  .btn-gradient-hover::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -2;
    border-radius: inherit;
    background: linear-gradient(to right, #F03E41 5%, #951DC6 35%, #398EEB 80%);
    clip-path: polygon(-1% 0, 0 0, -25% 100%, -1% 100%);
    transition: clip-path 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .btn-gradient-hover:hover::before {
    clip-path: polygon(0 0, 101% 0, 101% 101%, 0 101%);
  }

  .btn-gradient-hover span,
  .btn-gradient-hover > * {
    position: relative;
    z-index: 1;
  }

  /* Button hover effect for border buttons (solid color) */
  .btn-border-hover {
    position: relative;
    background-color: transparent;
    border: 2px solid;
    border-color: currentColor;
    transition: color 0.3s cubic-bezier(0.694, 0, 0.335, 1);
  }

  .btn-border-hover::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    border-radius: inherit;
    background-color: currentColor;
    clip-path: polygon(-1% 0, 0 0, -25% 100%, -1% 100%);
    transition: clip-path 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .btn-border-hover:hover::before {
    clip-path: polygon(0 0, 101% 0, 101% 101%, 0 101%);
  }

  .btn-border-hover span,
  .btn-border-hover > * {
    position: relative;
    z-index: 1;
  }

  /* Hero shimmer animation for gradient text */
  @keyframes shimmer {
    0% {
      background-position: -200% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  .animate-shimmer {
    background-size: 200% auto;
    animation: shimmer 8s ease-in-out infinite;
  }

  @keyframes mouse {
    0% {
      opacity: 0;
      top: 10px;
    }
    100% {
      opacity: 1;
      top: 30px;
    }
  }

  .animate-mouse {
    animation: mouse 2s linear infinite;
  }

  @keyframes blob-wander-a {
    0%   { transform: translate(0, 0)        scale(1);   opacity: 0.5; }
    12%  { transform: translate(8vw, -6vh)    scale(1.06); opacity: 0.55; }
    25%  { transform: translate(16vw, 4vh)    scale(1.1);  opacity: 0.6; }
    37%  { transform: translate(22vw, -2vh)   scale(1.04); opacity: 0.54; }
    50%  { transform: translate(14vw, 8vh)    scale(1.08); opacity: 0.58; }
    62%  { transform: translate(6vw, 2vh)     scale(0.98); opacity: 0.48; }
    75%  { transform: translate(18vw, 10vh)   scale(1.05); opacity: 0.56; }
    87%  { transform: translate(10vw, -4vh)   scale(1.02); opacity: 0.52; }
    100% { transform: translate(0, 0)        scale(1);   opacity: 0.5; }
  }

  @keyframes blob-wander-b {
    0%   { transform: translate(0, 0)        scale(1);   opacity: 0.45; }
    10%  { transform: translate(-6vw, -4vh)   scale(1.03); opacity: 0.5; }
    22%  { transform: translate(-14vw, 6vh)   scale(1.08); opacity: 0.56; }
    35%  { transform: translate(-20vw, -2vh)  scale(1.02); opacity: 0.5; }
    50%  { transform: translate(-12vw, 10vh)  scale(1.06); opacity: 0.54; }
    66%  { transform: translate(-4vw, -6vh)   scale(0.98); opacity: 0.46; }
    78%  { transform: translate(-18vw, 4vh)   scale(1.05); opacity: 0.52; }
    90%  { transform: translate(-8vw, -2vh)   scale(1.01); opacity: 0.48; }
    100% { transform: translate(0, 0)        scale(1);   opacity: 0.45; }
  }

  @keyframes blob-wander-c {
    0%   { transform: translate(0, 0)        scale(1);   opacity: 0.5; }
    12%  { transform: translate(6vw, 6vh)     scale(1.04); opacity: 0.54; }
    24%  { transform: translate(-8vw, 10vh)   scale(1.08); opacity: 0.6; }
    36%  { transform: translate(12vw, -8vh)   scale(1.02); opacity: 0.52; }
    50%  { transform: translate(-14vw, -4vh)  scale(1.06); opacity: 0.56; }
    64%  { transform: translate(18vw, 6vh)    scale(1.03); opacity: 0.53; }
    76%  { transform: translate(-10vw, 8vh)   scale(1.07); opacity: 0.57; }
    88%  { transform: translate(8vw, -6vh)    scale(1.01); opacity: 0.51; }
    100% { transform: translate(0, 0)        scale(1);   opacity: 0.5; }
  }

  .animate-blob-wander-a {
    animation: blob-wander-a 28s ease-in-out infinite;
    will-change: transform;
  }

  .animate-blob-wander-b {
    animation: blob-wander-b 32s ease-in-out infinite;
    will-change: transform;
  }

  .animate-blob-wander-c {
    animation: blob-wander-c 36s ease-in-out infinite;
    will-change: transform;
  }

  /* Paper texture overlay for Chinese sections */
  .paper-texture {
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.015) 2px,
        rgba(0, 0, 0, 0.015) 4px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.015) 2px,
        rgba(0, 0, 0, 0.015) 4px
      );
  }

  .dark .paper-texture {
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.02) 2px,
        rgba(255, 255, 255, 0.02) 4px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.02) 2px,
        rgba(255, 255, 255, 0.02) 4px
      );
  }
}

/* Editor theme tokens */
:root {
  --editor-bg: #0f1115;
  --panel-border: #1b1f2a;
  --gutter-bg: #0b0d12;
  --text-default: #e6e6e6;
  --comment: #9aa4b2;
  --keyword: #c678dd;
  --string: #98c379;
  --number: #d19a66;
  --punc: #7f8ea3;
}

/* Editor block */
.editor {
  background: var(--editor-bg);
  caret-color: var(--text-default);
}

.editor ::selection {
  background: rgba(91, 156, 255, 0.25);
}

/* Custom scrollbars */
.editor::-webkit-scrollbar {
  height: 10px;
  width: 10px;
}

.editor::-webkit-scrollbar-thumb {
  background: #1d2430;
  border-radius: 999px;
}

.editor::-webkit-scrollbar-track {
  background: transparent;
}

@layer components {
  .tok-keyword {
    @apply text-[var(--keyword)];
  }

  .tok-string {
    @apply text-[var(--string)];
  }

  .tok-number {
    @apply text-[var(--number)];
  }

  .tok-comment {
    @apply text-[var(--comment)];
  }

  .tok-punc {
    @apply text-[var(--punc)];
  }

  .gutter {
    @apply sticky left-0 pl-3 bg-[var(--gutter-bg)] border-r border-[var(--panel-border)];
  }

  .tab {
    @apply 
    snap-start rounded-md px-3 py-1.5 text-xs sm:text-sm 
    text-[var(--text-default)] opacity-50 hover:opacity-100 
    bg-transparent border border-transparent 
    focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5b9cff];
  }

  .tab-active {
    @apply text-[var(--text-default)] opacity-100 border-[var(--panel-border)] bg-[#141823];
  }
}